<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeInvader Ad Formatter</title>
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3d3d3d;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent: #4a76cf;
            --accent-hover: #5a86df;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --border: #444;
        }

        .light-mode {
            --bg-primary: #f5f5f5;
            --bg-secondary: #e0e0e0;
            --bg-tertiary: #d0d0d0;
            --text-primary: #333;
            --text-secondary: #666;
            --accent: #3f51b5;
            --accent-hover: #303f9f;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --border: #ccc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        h1 {
            font-size: 28px;
            color: var(--accent);
        }

        .theme-toggle {
            background: var(--bg-tertiary);
            border: none;
            color: var(--text-primary);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .theme-toggle:hover {
            background: var(--accent);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .input-section, .output-section {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h2 {
            margin-bottom: 15px;
            font-size: 22px;
            color: var(--accent);
        }

        textarea {
            width: 100%;
            height: 200px;
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 5px;
            padding: 15px;
            resize: vertical;
            font-size: 16px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s;
        }

        button:hover {
            background: var(--accent-hover);
        }

        button.secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        button.secondary:hover {
            background: var(--border);
        }

        .output-container {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 5px;
            padding: 15px;
            min-height: 200px;
            white-space: pre-wrap;
            font-size: 16px;
            line-height: 1.5;
        }

        .rejection-reason {
            color: var(--danger);
            font-weight: bold;
            margin-top: 10px;
        }

        .settings-section {
            margin-top: 30px;
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .settings-item {
            margin-bottom: 15px;
        }

        .settings-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .settings-item input, .settings-item select {
            width: 100%;
            padding: 8px 10px;
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 5px;
        }

        .custom-items {
            margin-top: 20px;
        }

        .custom-items-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            padding: 10px;
            background: var(--bg-primary);
            border-radius: 5px;
            border: 1px solid var(--border);
        }

        .custom-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid var(--border);
        }

        .custom-item:last-child {
            border-bottom: none;
        }

        .delete-item {
            color: var(--danger);
            cursor: pointer;
            font-weight: bold;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom: 2px solid var(--accent);
            color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .quick-templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .template-btn {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            transition: background 0.2s;
        }

        .template-btn:hover {
            background: var(--accent);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>LifeInvader Ad Formatter</h1>
            <button class="theme-toggle" id="themeToggle">
                <span id="themeIcon">☀️</span>
                <span id="themeText">Light Mode</span>
            </button>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="formatter">Ad Formatter</div>
            <div class="tab" data-tab="settings">Settings</div>
            <div class="tab" data-tab="help">Help</div>
        </div>

        <div class="tab-content active" id="formatter">
            <div class="main-content">
                <div class="input-section">
                    <h2>Input Raw Ad</h2>
                    <textarea id="rawAd" placeholder="Paste your raw ad here..."></textarea>
                    
                    <div class="button-group">
                        <button id="formatBtn">Format Ad</button>
                        <button id="clearBtn" class="secondary">Clear</button>
                    </div>

                    <div class="quick-templates">
                        <button class="template-btn" data-template="buying">Buying Template</button>
                        <button class="template-btn" data-template="selling">Selling Template</button>
                        <button class="template-btn" data-template="trading">Trading Template</button>
                        <button class="template-btn" data-template="renting">Renting Template</button>
                        <button class="template-btn" data-template="looking">Looking For Template</button>
                    </div>
                </div>

                <div class="output-section">
                    <h2>Formatted Ad</h2>
                    <div class="output-container" id="formattedAd">
                        Your formatted ad will appear here...
                    </div>
                    <div class="button-group">
                        <button id="copyBtn">Copy to Clipboard</button>
                    </div>
                    <div id="rejectionReason" class="rejection-reason"></div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="settings">
            <div class="settings-section">
                <h2>Settings</h2>
                <div class="settings-grid">
                    <div class="settings-item">
                        <label for="priceFormat">Price Format</label>
                        <select id="priceFormat">
                            <option value="standard">Standard ($1.000)</option>
                            <option value="compact">Compact ($1k)</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <label for="autoCapitalize">Auto Capitalize</label>
                        <select id="autoCapitalize">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <label for="defaultCategory">Default Category</label>
                        <select id="defaultCategory">
                            <option value="auto">Auto-detect</option>
                            <option value="realEstate">Real Estate</option>
                            <option value="auto">Auto</option>
                            <option value="business">Business</option>
                            <option value="work">Work</option>
                            <option value="dating">Dating</option>
                            <option value="services">Services</option>
                            <option value="discounts">Discounts</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <label for="rejectionStrictness">Rejection Strictness</label>
                        <select id="rejectionStrictness">
                            <option value="strict">Strict</option>
                            <option value="moderate">Moderate</option>
                            <option value="lenient">Lenient</option>
                        </select>
                    </div>
                </div>

                <div class="custom-items">
                    <h3>Custom Items</h3>
                    <div class="settings-item">
                        <label for="newItem">Add New Item</label>
                        <input type="text" id="newItem" placeholder="Enter item name...">
                        <button id="addItemBtn" style="margin-top: 10px;">Add Item</button>
                    </div>
                    <div class="custom-items-list" id="customItemsList">
                        <!-- Custom items will be listed here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="help">
            <div class="settings-section">
                <h2>Help & Instructions</h2>
                <h3>How to Use</h3>
                <p>1. Paste your raw ad in the input field</p>
                <p>2. Click "Format Ad" to process the ad according to LifeInvader policies</p>
                <p>3. Copy the formatted ad using the "Copy to Clipboard" button</p>
                
                <h3>Key Rules</h3>
                <p>- Always begin with: "Buying", "Selling", "Trading", or "Selling or trading"</p>
                <p>- Use "Budget:" for buying ads and "Price:" for selling ads</p>
                <p>- Use "Negotiable" if no price/budget is specified</p>
                <p>- Always capitalize the first letter and end with a period (unless ending with a number)</p>
                <p>- Use proper formatting for prices: $1.000 instead of $1k, $1 Million instead of $1m</p>
                
                <h3>Common Terms to Change</h3>
                <p>- "Looking to buy" → "Buying"</p>
                <p>- "Max config" → "with full configuration"</p>
                <p>- "Body upgrades" → "with visual upgrades"</p>
                <p>- "Extras" → "of type"</p>
                <p>- "Crates/cases" → "containers"</p>
                
                <h3>Rejection Reasons</h3>
                <p>The tool will flag ads that:</p>
                <p>- Contain illegal items (firearms, drugs, etc.)</p>
                <p>- Advertise more than 1 vehicle or 3 items</p>
                <p>- Have insufficient information</p>
                <p>- Contain prohibited content</p>
            </div>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            if (document.body.classList.contains('light-mode')) {
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark Mode';
            } else {
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light Mode';
            }
        });

        // Tab functionality
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Template buttons
        const templateButtons = document.querySelectorAll('.template-btn');
        const rawAdTextarea = document.getElementById('rawAd');
        
        templateButtons.forEach(button => {
            button.addEventListener('click', () => {
                const templateType = button.getAttribute('data-template');
                let templateText = '';
                
                switch(templateType) {
                    case 'buying':
                        templateText = 'Looking to buy a car. Budget: $500.000';
                        break;
                    case 'selling':
                        templateText = 'Selling my car. Price: $1.000.000';
                        break;
                    case 'trading':
                        templateText = 'Trading my car for another car.';
                        break;
                    case 'renting':
                        templateText = 'Renting out my house. Rent: $100.000 per week';
                        break;
                    case 'looking':
                        templateText = 'Looking for a job.';
                        break;
                }
                
                rawAdTextarea.value = templateText;
            });
        });

        // Format button functionality
        const formatBtn = document.getElementById('formatBtn');
        const clearBtn = document.getElementById('clearBtn');
        const copyBtn = document.getElementById('copyBtn');
        const formattedAd = document.getElementById('formattedAd');
        const rejectionReason = document.getElementById('rejectionReason');
        
        formatBtn.addEventListener('click', () => {
            const rawText = rawAdTextarea.value.trim();
            
            if (!rawText) {
                formattedAd.textContent = 'Please enter an ad to format.';
                rejectionReason.textContent = '';
                return;
            }
            
            // Process the ad
            const result = processAd(rawText);
            formattedAd.textContent = result.formattedAd;
            
            if (result.rejection) {
                rejectionReason.textContent = `Rejection Reason: ${result.rejection}`;
            } else {
                rejectionReason.textContent = '';
            }
        });
        
        clearBtn.addEventListener('click', () => {
            rawAdTextarea.value = '';
            formattedAd.textContent = 'Your formatted ad will appear here...';
            rejectionReason.textContent = '';
        });
        
        copyBtn.addEventListener('click', () => {
            const textToCopy = formattedAd.textContent;
            navigator.clipboard.writeText(textToCopy).then(() => {
                // Show temporary feedback
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            });
        });

        // Custom items functionality
        const addItemBtn = document.getElementById('addItemBtn');
        const newItemInput = document.getElementById('newItem');
        const customItemsList = document.getElementById('customItemsList');
        
        // Load custom items from localStorage
        let customItems = JSON.parse(localStorage.getItem('lifeinvaderCustomItems')) || [];
        renderCustomItems();
        
        addItemBtn.addEventListener('click', () => {
            const itemName = newItemInput.value.trim();
            if (itemName && !customItems.includes(itemName)) {
                customItems.push(itemName);
                localStorage.setItem('lifeinvaderCustomItems', JSON.stringify(customItems));
                renderCustomItems();
                newItemInput.value = '';
            }
        });
        
        function renderCustomItems() {
            customItemsList.innerHTML = '';
            customItems.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'custom-item';
                itemElement.innerHTML = `
                    <span>${item}</span>
                    <span class="delete-item" data-index="${index}">×</span>
                `;
                customItemsList.appendChild(itemElement);
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-item').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = parseInt(e.target.getAttribute('data-index'));
                    customItems.splice(index, 1);
                    localStorage.setItem('lifeinvaderCustomItems', JSON.stringify(customItems));
                    renderCustomItems();
                });
            });
        }

        // Ad processing function (simplified version)
        function processAd(rawText) {
            // This is a simplified version - a full implementation would be much more complex
            let formatted = rawText;
            let rejection = null;
            
            // Check for illegal items
            const illegalItems = [
                'firearm', 'gun', 'ammo', 'bullet', 'weed', 'cocaine', 'drug',
                'balaclava', 'rope', 'head bag', 'virus', 'lock pick', 'crowbar',
                'covid mask', 'bandit mask', 'animal skin', 'satellite dish',
                'barricade', 'anti-radar', 'engine block', 'air horn'
            ];
            
            for (const item of illegalItems) {
                if (rawText.toLowerCase().includes(item)) {
                    rejection = 'Cannot promote illegal items.';
                    break;
                }
            }
            
            // Check for multiple vehicles
            const vehicleKeywords = ['car', 'vehicle', 'motorcycle', 'bike', 'boat', 'plane', 'helicopter'];
            let vehicleCount = 0;
            
            vehicleKeywords.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'gi');
                const matches = rawText.match(regex);
                if (matches) vehicleCount += matches.length;
            });
            
            if (vehicleCount > 1 && !rawText.toLowerCase().includes('trading')) {
                rejection = 'Cannot advertise more than 1 vehicle at a time.';
            }
            
            // Basic formatting
            if (!rejection) {
                // Capitalize first letter
                formatted = formatted.charAt(0).toUpperCase() + formatted.slice(1);
                
                // Replace common terms
                const replacements = [
                    { from: /\blooking to buy\b/gi, to: 'Buying' },
                    { from: /\blooking to purchase\b/gi, to: 'Buying' },
                    { from: /\bmax config\b/gi, to: 'with full configuration' },
                    { from: /\bmax tuning\b/gi, to: 'with full configuration' },
                    { from: /\bfully upgraded\b/gi, to: 'with full configuration' },
                    { from: /\bnearly max\b/gi, to: 'with partial configuration' },
                    { from: /\bpartly upgraded\b/gi, to: 'with partial configuration' },
                    { from: /\bbody upgrades\b/gi, to: 'with visual upgrades' },
                    { from: /\bbody kit\b/gi, to: 'with visual upgrades' },
                    { from: /\bturbo\b/gi, to: 'turbo kit' },
                    { from: /\bdrift tuning\b/gi, to: 'drift kit' },
                    { from: /\bdrift assistance\b/gi, to: 'drift kit' },
                    { from: /\bluminous rims\b/gi, to: 'luminous wheels' },
                    { from: /\bunique wheels\b/gi, to: 'luminous wheels' },
                    { from: /\bcrates\b/gi, to: 'containers' },
                    { from: /\bcases\b/gi, to: 'containers' },
                    { from: /\bextras\b/gi, to: 'of type' },
                    { from: /\bspray cans\b/gi, to: 'paint cans' },
                    { from: /\bspray balloons\b/gi, to: 'paint cans' },
                    { from: /(\d)k\b/gi, to: '$1.000' },
                    { from: /(\d)\.(\d)k\b/gi, to: '$1.$200' },
                    { from: /(\d)m\b/gi, to: '$1 Million' },
                    { from: /(\d)\.(\d)m\b/gi, to: '$1.$2 Million' },
                ];
                
                replacements.forEach(rep => {
                    formatted = formatted.replace(rep.from, rep.to);
                });
                
                // Ensure proper ending punctuation
                if (!/[.!?]$/.test(formatted)) {
                    // If ends with a number, don't add period
                    if (/\d$/.test(formatted)) {
                        // No period needed
                    } else {
                        formatted += '.';
                    }
                }
                
                // Ensure proper price/budget format
                if (formatted.toLowerCase().includes('buying') && !formatted.toLowerCase().includes('budget:')) {
                    formatted = formatted.replace(/(buying.*?)(\.|$)/i, '$1 Budget: Negotiable.$2');
                }
                
                if (formatted.toLowerCase().includes('selling') && !formatted.toLowerCase().includes('price:')) {
                    formatted = formatted.replace(/(selling.*?)(\.|$)/i, '$1 Price: Negotiable.$2');
                }
                
                // Add dollar signs to prices
                formatted = formatted.replace(/(price:|budget:)\s*(\d+[.,]?\d*)/gi, '$1 $$2');
            }
            
            return {
                formattedAd: rejection ? 'AD REJECTED' : formatted,
                rejection: rejection
            };
        }
    </script>
</body>
</html>
